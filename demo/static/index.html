<html>
  <head>
    <title>argon2-wasm demo</title>
    <meta name="viewport" content="width=device-width,initial-scale=1.0">

    <script type="module">
      import { Argon2_Actions } from './argon2.js'
      import { initResponseListener, nextMessage } from './listen.js'
      const worker = new Worker('/worker.js')
      initResponseListener(worker)

      document.querySelector('form#demoForm').onsubmit = async (evt) => {
        evt.preventDefault()

        worker.postMessage({
          action: Argon2_Actions.LoadArgon2
        })

        const message = await nextMessage(worker)
      }
    </script>
  </head>

  <body>
    <h1>argon2-wasm demo</h1>
    <button id="loadButton">Load Argon2 WebAssembly</button>
    <form id="demoForm">
      <label for="text">Text passed to argon2, please don't use real passwords here:</label>
      <input id="password" type="text">
      <br>
      <label for="t_cost">Time cost:</label>
      <input id="t_cost" type="number" value="1">
      <br>
      <input type="submit" value="Run">
    </form>
  </body>
</html>
